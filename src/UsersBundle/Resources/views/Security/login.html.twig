{% extends "UsersBundle::layout.html.twig" %}

{% block pageLevelPlugins %}
    <link rel="stylesheet" href="{{ asset(GLOBAL~'plugins/select2/css/select2.min.css') }}" type="text/css" />
    <link rel="stylesheet" href="{{ asset(GLOBAL~'plugins/select2/css/select2-bootstrap.min.css') }}" type="text/css" />
{% endblock %}

{% block pageLevelStyles %}
    <link rel="stylesheet" href="{{ asset(PAGES~'css/login-5.min.css') }}" type="text/css" />
{% endblock %}

{% block stylesheet %}
    <style>
        .user-login-5 .alert { margin-top:-5px; }
    </style>
{% endblock %}

{% block body %}
<body class="login">
<div class="user-login-5">
    <div class="row bs-reset">
        <div class="col-md-6 bs-reset">
            <div class="login-bg" style="background-image:url({{ asset('bundles/public/images/login/bg1.jpg') }})">
                <a href="{{ path('publicIndex') }}">{#<img class="login-logo" src="{{ asset(PUBLIC_IMAGES~'logo130_32.png') }}" />#} </a>
            </div>
        </div>
        <div class="col-md-6 login-container bs-reset">
            <div class="login-content">
                {#<h1> {{ GLOBAL_TITLE_CH }}登录 </h1>#}
                <form action="{{ path("fos_user_security_check") }}" class="login-form" method="post">
                    {% if error %}
                        {{ messages.alertClose('danger', error|trans({}, 'FOSUserBundle'), 'login-alert') }}
                    {% else %}
                        {{ messages.alertClose('danger', null, 'display-hide login-alert') }}
                    {% endif %}
                    {{ forms.input('hidden', null, ' ', '_csrf_token', csrf_token) }}
                    <div class="row">
                        {{ forms.colInput(null, 'username', null, '_username', last_username, 'security.login.username'|trans({}, 'FOSUserBundle')) }}
                        {{ forms.colInput('password', 'password', null, '_password', null, 'security.login.password'|trans({}, 'FOSUserBundle')) }}
                    </div>
                    <div class="row">
                        <div class="col-sm-4 col-xs-4">
                            <div class="rem-password">
                                <label class="rememberme mt-checkbox mt-checkbox-outline">
                                    {{ forms.input('checkbox', 'remember_me', ' ', '_remember_me', 'on') }}{{ 'security.login.remember_me'|trans({}, 'FOSUserBundle') }}
                                    <span></span>
                                </label>
                            </div>
                        </div>
                        <div class="col-sm-8 col-xs-8 text-right">
                            <div class="forgot-password">
                                <a href="javascript:;" id="forget-password" class="forget-password"> 忘记密码 </a>
                            </div>
                            <div class="new-registered">
                                <a href="{{ path('fos_user_registration_register') }}" id="new-register" class="new-register"> 注册新账号 </a>
                            </div>
                            {{ forms.input('button', '_submit', 'btn green login-btn', '_submit', 'security.login.submit'|trans({}, 'FOSUserBundle')) }}
                        </div>
                    </div>
                </form>
            </div>
            <div class="login-footer">
                <div class="row bs-reset">
                    <div class="col-xs-5 bs-reset">
                        {#<ul class="login-social">#}
                        {#<li>#}
                        {#<a href="javascript:;">#}
                        {#<i class="icon-social-facebook"></i>#}
                        {#</a>#}
                        {#</li>#}
                        {#<li>#}
                        {#<a href="javascript:;">#}
                        {#<i class="icon-social-twitter"></i>#}
                        {#</a>#}
                        {#</li>#}
                        {#<li>#}
                        {#<a href="javascript:;">#}
                        {#<i class="icon-social-dribbble"></i>#}
                        {#</a>#}
                        {#</li>#}
                        {#</ul>#}
                    </div>
                    <div class="col-xs-7 bs-reset">
                        <div class="login-copyright text-right">
                            <p> Copyright © {{ "now" | date("Y") }} {{ GLOBAL_TITLE }} {% include "PublicBundle::Footer/version.html.twig" %} </p>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block footer %}{% endblock %}

{% block pageLevelPluginsScript %}
    <script src="{{ asset(GLOBAL~'plugins/jquery-validation/js/jquery.validate.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset(GLOBAL~'plugins/jquery-validation/js/additional-methods.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset(GLOBAL~'plugins/select2/js/select2.full.min.js') }}" type="text/javascript"></script>
    <script src="{{ asset(GLOBAL~'plugins/backstretch/jquery.backstretch.min.js') }}" type="text/javascript"></script>
{% endblock %}

{% block pageLevelScripts %}
    <script src="{{ asset(PAGES~'scripts/login-5.min.js') }}" type="text/javascript"></script>
{% endblock %}

{% block javascripts %}
    <script type="text/javascript">
        $(function(){
            $(document).on('click', '.login-form .login-btn', function (event) {
                if (!$('.login-form #username').val() || !$('.login-form #password').val()) {
                    $('.login-alert').fadeIn().find('p').html('请输入用户名和密码！');
                }else{
                    $('.login-btn').attr('type', 'submit');
                }
            });
        });
    </script>
{% endblock %}
